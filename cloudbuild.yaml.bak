# Build the Docker image using the 'gcr.io/cloud-builders/docker' image.
# The image tag is 'us-west1-docker.pkg.dev/${PROJECT_ID}/my-docker-repo/my-image'.
# The build context is '.' (the current directory).
steps:
  - name: 'gcr.io/cloud-builders/docker'
    args: ['build', '-t', 'us-west1-docker.pkg.dev/${PROJECT_ID}/my-docker-repo/my-image', '.']

# Push the built image to Artifact Registry using the 'gcr.io/cloud-builders/docker' image.
# The image tag is 'us-west1-docker.pkg.dev/${PROJECT_ID}/my-docker-repo/my-image'.
  - name: 'gcr.io/cloud-builders/docker'
    args: ['push', 'us-west1-docker.pkg.dev/${PROJECT_ID}/my-docker-repo/my-image']

# Configure Cloud Build to store build logs in Cloud Logging.
options:
  logging: CLOUD_LOGGING_ONLY
